package com.example.ai;

import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Scanner;

import opennlp.tools.postag.POSModel;
import opennlp.tools.postag.POSSample;
import opennlp.tools.postag.POSTaggerME;
import opennlp.tools.sentdetect.SentenceDetectorME;
import opennlp.tools.sentdetect.SentenceModel;
import opennlp.tools.tokenize.TokenizerME;
import opennlp.tools.tokenize.TokenizerModel;
import opennlp.tools.util.InvalidFormatException;

public class Speak {
	static Scanner sc = new Scanner(System.in);

	public static void main(String[] args) throws InvalidFormatException, IOException {
		// TODO Auto-generated method stub
		System.out.println("You: ");
		String Command = sc.nextLine();
		System.out.println("\n" + "Jarvis");
		String[] op = SentenceDetect(Command);
		for (int i = 0; i < op.length; i++) {
			String[] tokens = WordsDetect(op[i]);
			POSSample sample = TagPOS(tokens);

			System.out.println(sample.toString());
		}
	}

	public static String[] SentenceDetect(String paragraph) throws InvalidFormatException, IOException {

		// Dividing paragraph into different sentences
		InputStream is = new FileInputStream("models/en-sent.bin");
		SentenceModel model = new SentenceModel(is);
		SentenceDetectorME sdetector = new SentenceDetectorME(model);

		String[] sentences = sdetector.sentDetect(paragraph);

		is.close();
		return sentences;
	}

	public static String[] WordsDetect(String Sentence) throws IOException {
		// Dividing sentences into words
		InputStream is = new FileInputStream("models/en-token.bin");
		TokenizerModel model = new TokenizerModel(is);
		TokenizerME wdetector = new TokenizerME(model);
		String[] words = wdetector.tokenize(Sentence);
		return words;
	}

	public static POSSample TagPOS(String[] words) throws IOException {
		// Tagging each word with pos
		InputStream is = new FileInputStream("models/en-pos-maxent.bin");
		POSModel model = new POSModel(is);
		POSTaggerME tagger = new POSTaggerME(model);
		String[] tags = tagger.tag(words);
		POSSample sample = new POSSample(words, tags);

		return sample;
	}
}
